package parser

type Document struct {
	*CustomType
	ID         string
	Definitions []*CustomType
	Filename string
	Package     string

}

func NewDocument(ctx *SchemaContext, id string, anonymousStruct *Struct, definitions []*CustomType, filename string) *Document {
	s := PrefixType(anonymousStruct)
	return &Document{
		s,
		id,
		definitions,
		filename,
		ctx.Package,
	}

}

const DocumentTemplate = `
// Code generated by jsonschema. DO NOT EDIT.

{{- if .Package}}
package {{.Package}}
{{else}}
package main
{{- end}}

{{ if .ID -}}
// ID: {{.ID}}
{{ end }}

{{ if .CustomType -}}
	{{template "customtype" .CustomType }}
{{end -}}
{{range $key, $definition := .Definitions -}}
	{{template "customtype" $definition  }}
{{end -}}
`